{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sehal\\\\OneDrive\\\\Desktop\\\\pearlthoughts\\\\src\\\\components\\\\CalendarPreview.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useRecurrenceStore } from \"../store/recurrenceStore\";\nimport { getRecurringDates } from \"../utils/recurrenceUtils\";\nimport { format, startOfMonth, endOfMonth, eachDayOfInterval, isSameDay, isToday } from \"date-fns\";\nimport { enUS, fr, de, es, zhCN } from \"date-fns/locale\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst localeMap = {\n  \"en-US\": enUS,\n  fr,\n  de,\n  es,\n  \"zh-CN\": zhCN\n};\nconst dateFormats = [\"yyyy-MM-dd\", \"dd/MM/yyyy\", \"MM/dd/yyyy\", \"d MMM yyyy\"];\nconst locales = [\"en-US\", \"fr\", \"de\", \"es\", \"zh-CN\"];\nconst ruleColors = [\"bg-blue-400\", \"bg-purple-400\", \"bg-pink-400\", \"bg-green-400\", \"bg-yellow-400\", \"bg-red-400\"];\nfunction mergeUniqueDatesWithRule(arrays) {\n  const map = new Map();\n  arrays.forEach((arr, ruleIdx) => {\n    arr.forEach(d => {\n      const key = d.toISOString();\n      if (!map.has(key)) map.set(key, {\n        date: d,\n        rules: [ruleIdx]\n      });else map.get(key).rules.push(ruleIdx);\n    });\n  });\n  return Array.from(map.values()).sort((a, b) => a.date - b.date);\n}\nfunction generateICS(dates, {\n  startTime,\n  endTime\n}) {\n  const pad = n => n.toString().padStart(2, \"0\");\n  const dt = (d, t) => {\n    if (t) return `${d.getFullYear()}${pad(d.getMonth() + 1)}${pad(d.getDate())}T${t.replace(\":\", \"\")}00Z`;\n    return `${d.getFullYear()}${pad(d.getMonth() + 1)}${pad(d.getDate())}`;\n  };\n  let ics = [\"BEGIN:VCALENDAR\", \"VERSION:2.0\", \"PRODID:-//RecurringDatePicker//EN\"];\n  dates.forEach((d, i) => {\n    ics.push(\"BEGIN:VEVENT\");\n    if (startTime) {\n      ics.push(`DTSTART:${dt(d, startTime)}`);\n      ics.push(`DTEND:${dt(d, endTime || startTime)}`);\n    } else {\n      ics.push(`DTSTART;VALUE=DATE:${dt(d)}`);\n      ics.push(`DTEND;VALUE=DATE:${dt(new Date(d.getTime() + 86400000))}`); // next day\n    }\n    ics.push(`SUMMARY:Recurring Event ${i + 1}`);\n    ics.push(\"END:VEVENT\");\n  });\n  ics.push(\"END:VCALENDAR\");\n  return ics.join(\"\\r\\n\");\n}\nexport default function CalendarPreview() {\n  _s();\n  const {\n    rules,\n    startDate,\n    endDate,\n    exclusionDates,\n    endAfterOccurrences,\n    locale,\n    dateFormat,\n    setLocale,\n    setDateFormat,\n    startTime,\n    endTime\n  } = useRecurrenceStore();\n\n  // Combine all rules, track which rule(s) each date belongs to\n  const allDatesWithRule = mergeUniqueDatesWithRule(rules.map(rule => getRecurringDates({\n    ...rule,\n    startDate,\n    endDate,\n    exclusionDates,\n    endAfterOccurrences\n  })));\n  const allDates = allDatesWithRule.map(d => d.date);\n\n  // Validation\n  const errors = [];\n  if (!rules || rules.length === 0) errors.push(\"At least one recurrence rule is required.\");\n  if (!startDate) errors.push(\"Start date is required.\");\n  if (allDates.length === 0 && rules.length > 0 && startDate) errors.push(\"No dates match the current recurrence settings.\");\n\n  // Show calendar for the month of startDate or today\n  const baseDate = startDate ? new Date(startDate) : new Date();\n  const monthStart = startOfMonth(baseDate);\n  const monthEnd = endOfMonth(baseDate);\n  const days = eachDayOfInterval({\n    start: monthStart,\n    end: monthEnd\n  });\n  const handleExportICS = () => {\n    const ics = generateICS(allDates, {\n      startTime,\n      endTime\n    });\n    const blob = new Blob([ics], {\n      type: \"text/calendar\"\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = \"recurring-dates.ics\";\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(() => {\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    }, 100);\n  };\n  const handleCopy = () => {\n    const text = allDates.map(d => format(d, dateFormat, {\n      locale: localeMap[locale]\n    })).join(\"\\n\");\n    navigator.clipboard.writeText(text);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col gap-6\",\n    children: [errors.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-2 p-2 bg-yellow-100 border border-yellow-300 text-yellow-800 rounded text-sm\",\n      children: errors.map((err, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: err\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap items-center gap-4 mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-xs mr-1\",\n          children: \"Locale\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"border rounded px-2 py-1 text-xs focus:ring focus:ring-blue-200\",\n          value: locale,\n          onChange: e => setLocale(e.target.value),\n          children: locales.map(l => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: l,\n            children: l\n          }, l, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-xs mr-1\",\n          children: \"Date Format\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"border rounded px-2 py-1 text-xs focus:ring focus:ring-blue-200\",\n          value: dateFormat,\n          onChange: e => setDateFormat(e.target.value),\n          children: dateFormats.map(f => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: f,\n            children: f\n          }, f, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-lg border border-gray-200 bg-gradient-to-br from-blue-50 via-white to-purple-50 shadow p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"font-semibold mb-3 flex items-center gap-2 text-blue-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"h-5 w-5 text-blue-400\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 104\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), \"Calendar Preview\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"w-full border-collapse text-center select-none\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"].map(d => /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"p-1 text-xs font-medium text-gray-500\",\n                children: d\n              }, d, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: getCalendarRows(days, allDatesWithRule)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-lg border border-gray-200 bg-gradient-to-br from-purple-50 via-white to-blue-50 shadow p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-semibold mb-2 flex items-center gap-2 text-purple-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"h-5 w-5 text-purple-400\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M12 8v4l3 3m6 4a9 9 0 11-18 0 9 9 0 0118 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 106\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), \"Upcoming Dates\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-2 mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm flex items-center gap-1 shadow\",\n          onClick: handleExportICS,\n          disabled: allDates.length === 0,\n          title: \"Export as .ics file\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-4 w-4\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M12 4v16m8-8H4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 92\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), \"Export .ics\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 text-sm flex items-center gap-1 shadow\",\n          onClick: handleCopy,\n          disabled: allDates.length === 0,\n          title: \"Copy dates to clipboard\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-4 w-4\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M8 16h8M8 12h8m-7 8h6a2 2 0 002-2V6a2 2 0 00-2-2H9a2 2 0 00-2 2v12a2 2 0 002 2z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 92\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), \"Copy List\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"max-h-40 overflow-y-auto border rounded bg-white/80 p-2 text-sm\",\n        children: [allDatesWithRule.slice(0, 20).map(({\n          date,\n          rules\n        }) => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"py-0.5 px-1 flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"inline-flex gap-1\",\n            children: rules.map(ruleIdx => /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `inline-block w-2 h-2 rounded-full ${ruleColors[ruleIdx % ruleColors.length]}`\n            }, ruleIdx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, this), format(date, dateFormat, {\n            locale: localeMap[locale]\n          }), isToday(date) && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2 px-2 py-0.5 rounded-full bg-yellow-200 text-yellow-800 text-xs font-semibold\",\n            children: \"Today\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 33\n          }, this)]\n        }, date.toISOString(), true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this)), allDatesWithRule.length === 0 && /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"text-gray-400\",\n          children: \"No dates\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 45\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n}\n_s(CalendarPreview, \"XvdslB+C6KxLJ6d1g4nbqg0uQAw=\", false, function () {\n  return [useRecurrenceStore];\n});\n_c = CalendarPreview;\nfunction getCalendarRows(days, allDatesWithRule) {\n  const rows = [];\n  let week = [];\n  let dayIdx = days[0].getDay();\n  // Fill initial empty cells\n  for (let i = 0; i < dayIdx; i++) week.push(/*#__PURE__*/_jsxDEV(\"td\", {}, \"empty-\" + i, false, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 46\n  }, this));\n  days.forEach((day, i) => {\n    const match = allDatesWithRule.find(d => isSameDay(d.date, day));\n    const isRec = !!match;\n    const isTdy = isToday(day);\n    week.push(/*#__PURE__*/_jsxDEV(\"td\", {\n      className: `p-1 transition cursor-pointer select-none relative ` + (isRec ? \"bg-blue-500/80 text-white font-bold shadow-inner hover:bg-blue-600 focus:bg-blue-700 \" : \"text-gray-700 hover:bg-gray-100 focus:bg-gray-200 \") + (isTdy ? \" ring-2 ring-yellow-400\" : \"\"),\n      tabIndex: 0,\n      title: isRec ? `Recurring date${match.rules.length > 1 ? ' (multiple rules)' : ''}` : '',\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"relative z-10\",\n        children: format(day, \"d\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), isRec && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"absolute bottom-1 left-1 flex gap-0.5\",\n        children: match.rules.map(ruleIdx => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `inline-block w-2 h-2 rounded-full ${ruleColors[ruleIdx % ruleColors.length]}`\n        }, ruleIdx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this), isTdy && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"absolute top-1 right-1 w-2 h-2 rounded-full bg-yellow-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 19\n      }, this)]\n    }, day.toISOString(), true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this));\n    if (week.length === 7 || i === days.length - 1) {\n      rows.push(/*#__PURE__*/_jsxDEV(\"tr\", {\n        children: week\n      }, day.toISOString(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }, this));\n      week = [];\n    }\n  });\n  return rows;\n}\nvar _c;\n$RefreshReg$(_c, \"CalendarPreview\");","map":{"version":3,"names":["React","useRecurrenceStore","getRecurringDates","format","startOfMonth","endOfMonth","eachDayOfInterval","isSameDay","isToday","enUS","fr","de","es","zhCN","jsxDEV","_jsxDEV","localeMap","dateFormats","locales","ruleColors","mergeUniqueDatesWithRule","arrays","map","Map","forEach","arr","ruleIdx","d","key","toISOString","has","set","date","rules","get","push","Array","from","values","sort","a","b","generateICS","dates","startTime","endTime","pad","n","toString","padStart","dt","t","getFullYear","getMonth","getDate","replace","ics","i","Date","getTime","join","CalendarPreview","_s","startDate","endDate","exclusionDates","endAfterOccurrences","locale","dateFormat","setLocale","setDateFormat","allDatesWithRule","rule","allDates","errors","length","baseDate","monthStart","monthEnd","days","start","end","handleExportICS","blob","Blob","type","url","URL","createObjectURL","document","createElement","href","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","handleCopy","text","navigator","clipboard","writeText","className","children","err","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","l","f","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","getCalendarRows","onClick","disabled","title","slice","_c","rows","week","dayIdx","getDay","day","match","find","isRec","isTdy","tabIndex","$RefreshReg$"],"sources":["C:/Users/sehal/OneDrive/Desktop/pearlthoughts/src/components/CalendarPreview.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useRecurrenceStore } from \"../store/recurrenceStore\";\r\nimport { getRecurringDates } from \"../utils/recurrenceUtils\";\r\nimport { format, startOfMonth, endOfMonth, eachDayOfInterval, isSameDay, isToday } from \"date-fns\";\r\nimport { enUS, fr, de, es, zhCN } from \"date-fns/locale\";\r\n\r\nconst localeMap = {\r\n  \"en-US\": enUS,\r\n  fr,\r\n  de,\r\n  es,\r\n  \"zh-CN\": zhCN,\r\n};\r\nconst dateFormats = [\"yyyy-MM-dd\", \"dd/MM/yyyy\", \"MM/dd/yyyy\", \"d MMM yyyy\"];\r\nconst locales = [\"en-US\", \"fr\", \"de\", \"es\", \"zh-CN\"];\r\nconst ruleColors = [\"bg-blue-400\", \"bg-purple-400\", \"bg-pink-400\", \"bg-green-400\", \"bg-yellow-400\", \"bg-red-400\"];\r\n\r\nfunction mergeUniqueDatesWithRule(arrays) {\r\n  const map = new Map();\r\n  arrays.forEach((arr, ruleIdx) => {\r\n    arr.forEach((d) => {\r\n      const key = d.toISOString();\r\n      if (!map.has(key)) map.set(key, { date: d, rules: [ruleIdx] });\r\n      else map.get(key).rules.push(ruleIdx);\r\n    });\r\n  });\r\n  return Array.from(map.values()).sort((a, b) => a.date - b.date);\r\n}\r\n\r\nfunction generateICS(dates, { startTime, endTime }) {\r\n  const pad = (n) => n.toString().padStart(2, \"0\");\r\n  const dt = (d, t) => {\r\n    if (t) return `${d.getFullYear()}${pad(d.getMonth() + 1)}${pad(d.getDate())}T${t.replace(\":\", \"\")}00Z`;\r\n    return `${d.getFullYear()}${pad(d.getMonth() + 1)}${pad(d.getDate())}`;\r\n  };\r\n  let ics = [\r\n    \"BEGIN:VCALENDAR\",\r\n    \"VERSION:2.0\",\r\n    \"PRODID:-//RecurringDatePicker//EN\",\r\n  ];\r\n  dates.forEach((d, i) => {\r\n    ics.push(\"BEGIN:VEVENT\");\r\n    if (startTime) {\r\n      ics.push(`DTSTART:${dt(d, startTime)}`);\r\n      ics.push(`DTEND:${dt(d, endTime || startTime)}`);\r\n    } else {\r\n      ics.push(`DTSTART;VALUE=DATE:${dt(d)}`);\r\n      ics.push(`DTEND;VALUE=DATE:${dt(new Date(d.getTime() + 86400000))}`); // next day\r\n    }\r\n    ics.push(`SUMMARY:Recurring Event ${i + 1}`);\r\n    ics.push(\"END:VEVENT\");\r\n  });\r\n  ics.push(\"END:VCALENDAR\");\r\n  return ics.join(\"\\r\\n\");\r\n}\r\n\r\nexport default function CalendarPreview() {\r\n  const {\r\n    rules,\r\n    startDate,\r\n    endDate,\r\n    exclusionDates,\r\n    endAfterOccurrences,\r\n    locale,\r\n    dateFormat,\r\n    setLocale,\r\n    setDateFormat,\r\n    startTime,\r\n    endTime,\r\n  } = useRecurrenceStore();\r\n\r\n  // Combine all rules, track which rule(s) each date belongs to\r\n  const allDatesWithRule = mergeUniqueDatesWithRule(\r\n    rules.map((rule) =>\r\n      getRecurringDates({\r\n        ...rule,\r\n        startDate,\r\n        endDate,\r\n        exclusionDates,\r\n        endAfterOccurrences,\r\n      })\r\n    )\r\n  );\r\n  const allDates = allDatesWithRule.map((d) => d.date);\r\n\r\n  // Validation\r\n  const errors = [];\r\n  if (!rules || rules.length === 0) errors.push(\"At least one recurrence rule is required.\");\r\n  if (!startDate) errors.push(\"Start date is required.\");\r\n  if (allDates.length === 0 && rules.length > 0 && startDate) errors.push(\"No dates match the current recurrence settings.\");\r\n\r\n  // Show calendar for the month of startDate or today\r\n  const baseDate = startDate ? new Date(startDate) : new Date();\r\n  const monthStart = startOfMonth(baseDate);\r\n  const monthEnd = endOfMonth(baseDate);\r\n  const days = eachDayOfInterval({ start: monthStart, end: monthEnd });\r\n\r\n  const handleExportICS = () => {\r\n    const ics = generateICS(allDates, { startTime, endTime });\r\n    const blob = new Blob([ics], { type: \"text/calendar\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = \"recurring-dates.ics\";\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    setTimeout(() => {\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(url);\r\n    }, 100);\r\n  };\r\n\r\n  const handleCopy = () => {\r\n    const text = allDates.map((d) => format(d, dateFormat, { locale: localeMap[locale] })).join(\"\\n\");\r\n    navigator.clipboard.writeText(text);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-6\">\r\n      {errors.length > 0 && (\r\n        <div className=\"mb-2 p-2 bg-yellow-100 border border-yellow-300 text-yellow-800 rounded text-sm\">\r\n          {errors.map((err, i) => (\r\n            <div key={i}>{err}</div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      <div className=\"flex flex-wrap items-center gap-4 mb-2\">\r\n        <div>\r\n          <label className=\"text-xs mr-1\">Locale</label>\r\n          <select\r\n            className=\"border rounded px-2 py-1 text-xs focus:ring focus:ring-blue-200\"\r\n            value={locale}\r\n            onChange={(e) => setLocale(e.target.value)}\r\n          >\r\n            {locales.map((l) => (\r\n              <option key={l} value={l}>{l}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label className=\"text-xs mr-1\">Date Format</label>\r\n          <select\r\n            className=\"border rounded px-2 py-1 text-xs focus:ring focus:ring-blue-200\"\r\n            value={dateFormat}\r\n            onChange={(e) => setDateFormat(e.target.value)}\r\n          >\r\n            {dateFormats.map((f) => (\r\n              <option key={f} value={f}>{f}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className=\"rounded-lg border border-gray-200 bg-gradient-to-br from-blue-50 via-white to-purple-50 shadow p-4\">\r\n        <h2 className=\"font-semibold mb-3 flex items-center gap-2 text-blue-700\">\r\n          <svg className=\"h-5 w-5 text-blue-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" /></svg>\r\n          Calendar Preview\r\n        </h2>\r\n        <div className=\"overflow-x-auto mb-4\">\r\n          <table className=\"w-full border-collapse text-center select-none\">\r\n            <thead>\r\n              <tr>\r\n                {[\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"].map((d) => (\r\n                  <th key={d} className=\"p-1 text-xs font-medium text-gray-500\">{d}</th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {getCalendarRows(days, allDatesWithRule)}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      <div className=\"rounded-lg border border-gray-200 bg-gradient-to-br from-purple-50 via-white to-blue-50 shadow p-4\">\r\n        <h3 className=\"font-semibold mb-2 flex items-center gap-2 text-purple-700\">\r\n          <svg className=\"h-5 w-5 text-purple-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6 4a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\r\n          Upcoming Dates\r\n        </h3>\r\n        <div className=\"flex flex-wrap gap-2 mb-2\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm flex items-center gap-1 shadow\"\r\n            onClick={handleExportICS}\r\n            disabled={allDates.length === 0}\r\n            title=\"Export as .ics file\"\r\n          >\r\n            <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" /></svg>\r\n            Export .ics\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 text-sm flex items-center gap-1 shadow\"\r\n            onClick={handleCopy}\r\n            disabled={allDates.length === 0}\r\n            title=\"Copy dates to clipboard\"\r\n          >\r\n            <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16h8M8 12h8m-7 8h6a2 2 0 002-2V6a2 2 0 00-2-2H9a2 2 0 00-2 2v12a2 2 0 002 2z\" /></svg>\r\n            Copy List\r\n          </button>\r\n        </div>\r\n        <ul className=\"max-h-40 overflow-y-auto border rounded bg-white/80 p-2 text-sm\">\r\n          {allDatesWithRule.slice(0, 20).map(({ date, rules }) => (\r\n            <li key={date.toISOString()} className=\"py-0.5 px-1 flex items-center gap-2\">\r\n              <span className=\"inline-flex gap-1\">\r\n                {rules.map((ruleIdx) => (\r\n                  <span key={ruleIdx} className={`inline-block w-2 h-2 rounded-full ${ruleColors[ruleIdx % ruleColors.length]}`}></span>\r\n                ))}\r\n              </span>\r\n              {format(date, dateFormat, { locale: localeMap[locale] })}\r\n              {isToday(date) && <span className=\"ml-2 px-2 py-0.5 rounded-full bg-yellow-200 text-yellow-800 text-xs font-semibold\">Today</span>}\r\n            </li>\r\n          ))}\r\n          {allDatesWithRule.length === 0 && <li className=\"text-gray-400\">No dates</li>}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getCalendarRows(days, allDatesWithRule) {\r\n  const rows = [];\r\n  let week = [];\r\n  let dayIdx = days[0].getDay();\r\n  // Fill initial empty cells\r\n  for (let i = 0; i < dayIdx; i++) week.push(<td key={\"empty-\" + i}></td>);\r\n  days.forEach((day, i) => {\r\n    const match = allDatesWithRule.find((d) => isSameDay(d.date, day));\r\n    const isRec = !!match;\r\n    const isTdy = isToday(day);\r\n    week.push(\r\n      <td\r\n        key={day.toISOString()}\r\n        className={\r\n          `p-1 transition cursor-pointer select-none relative ` +\r\n          (isRec\r\n            ? \"bg-blue-500/80 text-white font-bold shadow-inner hover:bg-blue-600 focus:bg-blue-700 \"\r\n            : \"text-gray-700 hover:bg-gray-100 focus:bg-gray-200 \") +\r\n          (isTdy ? \" ring-2 ring-yellow-400\" : \"\")\r\n        }\r\n        tabIndex={0}\r\n        title={isRec ? `Recurring date${match.rules.length > 1 ? ' (multiple rules)' : ''}` : ''}\r\n      >\r\n        <span className=\"relative z-10\">{format(day, \"d\")}</span>\r\n        {isRec && (\r\n          <span className=\"absolute bottom-1 left-1 flex gap-0.5\">\r\n            {match.rules.map((ruleIdx) => (\r\n              <span key={ruleIdx} className={`inline-block w-2 h-2 rounded-full ${ruleColors[ruleIdx % ruleColors.length]}`}></span>\r\n            ))}\r\n          </span>\r\n        )}\r\n        {isTdy && <span className=\"absolute top-1 right-1 w-2 h-2 rounded-full bg-yellow-400\"></span>}\r\n      </td>\r\n    );\r\n    if (week.length === 7 || i === days.length - 1) {\r\n      rows.push(<tr key={day.toISOString()}>{week}</tr>);\r\n      week = [];\r\n    }\r\n  });\r\n  return rows;\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}